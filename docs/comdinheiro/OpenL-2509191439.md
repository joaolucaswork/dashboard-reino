Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br>

# Guia de Importação – API Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br>

# Sumário

Informações Gerais ................................ ................................ ................................ ................................ ....................... 1

Ferramenta de Importação API ................................ ................................ ................................ ................................ .... 1

Informações de Entrada ................................ ................................ ................................ ................................ ............... 1

Código Gerado ................................ ................................ ................................ ................................ .............................. 3

Exemplo de Consulta ................................ ................................ ................................ ................................ .................... 3

Teste de Requisição API ................................ ................................ ................................ .............................. 4

O que Fazer em Caso de Problemas? ................................ ................................ ................................ ........................... 5

Avisos Importantes ................................ ................................ ................................ ................................ ....................... 6Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br> 1

Informações Gerais

Link de acesso à ferramenta:  <https://www.comdinheiro.com.br/ManualImportacaoAPI001.php>

O guia tem como objetivo orientar os usuários a realizar importações de dados d a Comdinheiro via API através de sua

ferramenta que, ao final, gera um código de requisição para ser incorporado ao código do cliente, de modo que, ao

ser executado, o código retornará as informações referentes à ferramenta de dados escolhida e seus parâmetros

definidos na URL da consulta. Além de toda a explicação sobre como utilizar a ferramenta, há, também, uma

demonstração de como testar uma requisição via cliente HTTP.

Ferramenta de Importação API

A ferramenta possui 2 quadros em sua estrutura, sendo o primeiro para a s informações de entrada e o segundo para

a exibição e coleta do código gerado pela ferramenta.

Informações de Entrada

Após acessar a página da ferramenta, o próximo passo é iniciar o preenchimento dos dados. Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br> 2

Us uário /Senha : nestes campos, basta inserir as mesmas credencia is utilizadas para acesso ao Comdinheiro.

Obs: a sua senha ficará visível no código gerado, então é recomendado que seja utilizada a hash (se nha com caracteres

aleatórios e de grande tamanho) , por motivos de segurança.

Ferramenta : cas o não haja uma URL que o usuário queira utilizar no próximo campo , há a possibilidade de escolher

al guma das ferramentas disponíveis na lista e , ao esco lher uma delas, o códig o será gerado considerando a URL

padrão d a página selec ionada.

Obs: caso seja definida uma URL no campo “U RL da Consulta ”, o campo com a lista de ferra mentas ficará des abilitado,

assim como consta na imagem acima em que há uma URL definida , tornando a lista inacessível.

URL da Consulta: caso o usuário op te por adicionar uma URL no respectivo campo, o código irá incorpo rá -la e, ao

rodar o código, será re tornado o conteúdo da consulta, com base na ferramenta e seus parâmetr os definidos n a URL.

Obs: note que a URL que consta n o c ampo não possui o trecho que a precede “<https://www.comdinheiro.com.br/> ”.

A URL inserida deve ser de uma ferramenta qu e p ertença a lista de ferramentas disponí ve is para API. É possível

co nsu ltar pela lista no cam po “Fer ramenta ”, ou no link “Ferramentas Disponí veis ”

Ling uagem: o campo serve par a que o usu ário escolha a linguagem para qual o código será gerado. Na lista, são

dispon ibilizadas algumas das principais linguagens de programação .Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br> 3

Formato: atualmente, são disponibili zados dois tipos de formatos: JSON e XML. O formato JSON retornará os dados

em JSON3 ( versão mais re cente da API para o formato) e o formato XML retornará os dados em XML2 ( versão mais

recente da API par a o formato ).

Obs: apesar das versões anteriores dos format os JSON e XML (JSON, JSON2 e XML) não estarem disponíveis, elas

ainda funcio nam , caso uma requisição seja feita com tais versões .

Gerar Có digo: por fim, após reali zar todas as definições necessárias, basta clicar no botão “Gerar Código ” e, logo

abai xo, no segundo quadro, será exibido o código que atende aos parâmetros passados pelo usuário.

Có digo Gerado

Com o código gerado, basta cli car e m copia r para que o usuário possa incorporá -lo aonde des eja r.

Exemplo de Consu lta

Supondo uma consulta cuj as premissas sejam as seguintes:

• URL escolhida pelo usuário :

> HistoricoCotacao002.php?&x=NTNB_15082004_15052024+CDI&data_ini=13032024&data_fim=14032024&pagina=1&d=MOED
> A_ORIGINAL&g=1&m=0&info_desejada=numero_indice&retorno=discreto&tipo_data=du_br&tipo_ajuste=todosajustes&num_
> casas=2&enviar_email=0&ordem_legenda=1&cab ecalho_excel=modo1&classes_ativos=hio94mrrlk3j&ordem_data=0&rent_ac
> um=rent_acum&minY=&maxY=&deltaY=&preco_nd_ant=0&base_num_indice=100&flag_num_indice=0&eixo_x=Data&startX=
> 0&max_list_size=20&line_width=2&titulo_grafico=&legenda_eixoy=&tipo_grafico=line&scr ipt=&tooltip= única

• Linguagem em que o código deve ser gerado : Python

• Form ato (que o código gerado deve retornar ao ser rodado): XML (XML sai rá como XML2 )Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br> 4

Co nsiderando os parâmetros desejados, a ferramenta deve ser preenchida da seguinte forma :

Ao clicar em gera r o código, o c ódigo deverá vir da segui nte forma:

Após copiar o cód igo par a o am biente em que será rodado e colocar o código par a ser executado, o retorn o deve

ser equivalente ao que se observa ao abrir essa url:

> <https://www.comdinheiro.com.br/HistoricoCotacao002.php?&x=NTNB_15082004_15052024+CDI&data_ini=13032024&data_fim=140320>
> 24&pagina=1&d=MOEDA_ORIGINAL&g=1&m=0&info_desejada=numero_indice&retorno=discreto&tipo_data=du_br&tipo_ajuste=todosaj
> ustes&num_casas=2&env iar_email=0&ordem_legenda=1&cabecalho_excel=modo1&classes_ativos=hio94mrrlk3j&ordem_data=0&rent_a
> cum=rent_acum&minY=&maxY=&deltaY=&preco_nd_ant=0&base_num_indice=100&flag_num_indice=0&eixo_x=Data&startX=0&max_list
> _size=20&line_width=2&titulo_grafico=&legen da_eixoy=&tipo_grafico=line&script=&tooltip=unica&flag_export=XML2

Teste de Requisição API

Uma forma de testar os parâmetros de uma consulta é utilizando qualquer cliente HTTP. Por meio dele, é possível montar uma

requisição e verificar qual o retorno dela, vali dando assim os parâmetros inseridos, como , por exemplo, a URL que o

usuário de seja utilizar, o formato de respos ta da consulta , entre outros. Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br> 5

Ao acessar o Postm an e iniciar uma nova requisição, devemos preenchê -la da seguinte maneira:

Método (selecionar opção): POST

En dereço (adicionar) : <https://www.comdinheiro.com.br/Clientes/API/EndPoint001.php?code=import_data>

Body (aba em que os parâmetro s serão passados)

Codificação (selecionar opção): x-www -form -urlencoded

Key (ins erir as chaves na coluna ): userna me , password , URL e format

Val ue (inserir os valores na coluna): usu ário e senha (de quem estiver montando a re qu isição) , URL (qualquer URL de

ferra menta compatível com API), formato (JSON, JSON2, JSON3 , XML e XML2 – escolher uma das opções )

Após passar todos os parâmetros , a co nsulta est ará pronta, restando apenas c licar no botão “Send ” para processar a

requisição. O resultado da requisição pode ser acompanhado lo go abaixo do quadro em que a requisição é montada.

O que Fazer em Caso de Problemas ?

Caso haja algum problema ao gerar o código de importação via API (ferramenta Comdinheiro) , ou surgirem probl emas

ao efetuar as requisições , são indicadas as recom endações abaixo:

• Revis ar to dos os parâmetros passados ( alg um erro nessa etapa pode ser o causador do problema);

• Testar a U RL acessando a Comdinheiro (data em di a não útil ou parâmetros indevidos podem fazer com que

a consulta não traga resultados . Neste caso, a solução passa por ajustar a URL;

• Verificar se a URL adicionada é de uma ferramenta que possui importação de dados via API ;Comdinheiro

Tel +55 11 4133 -4900

E-mail <contato@comdinheiro.com.br> 6

• Ve rificar usuário/senha . Além de u m erro de digitação, é possível que haja algum a pendência ou limitação

referente ao usuário e tal fator pode invalidar a consulta. Dica: ao re alizar a re quisição, verifique o código de

status da requi sição , pois pode fornecer uma pista do problema apre sentado.

Caso nenhuma das opções re solv a o problema, é possível en tr ar em contato com a eq uipe de atendimento da

Com dinheiro para que o problema seja a nalisado.

Avisos Importantes

Contage m de Pageview s

Ca da requisição feita atr avés da API conta como um pageview usado no login. Eles são cumulativos, ou seja, os

pageviews usados em te la e pela API , são considerados da mesma forma.

Acesso simultâneo

Para os logins com restrição de acessos simultâneos, va le a seguinte regra:

- Se uma segunda requisição é feita enquanto uma primeira ainda está em andamento, a primeira continuará até ser

concluída, já a segunda receberá uma mensagem de erro.
